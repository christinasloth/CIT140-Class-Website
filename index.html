<!DOCTYPE html>
<html>
<head> <title>CIT140 Class Website</title>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.2/handlebars.min.js">
	</script>
	
</head>

<body>
	<h1><b>Select a Major</b></h1>
	<h3><b>We filter our dataset by major</b></h3>
	<div id="majorTable"></div>
</body>

<script type="text/x-handlebars-template" id="tableTemplate">
	<table cellspacing='12'>
	<tr><th>Name</th><th>Major</th><th>Midterm</th><th>Final</th></tr>
	{{#each rows}}
		<tr>
			<td>{{name}}</td><td>{{major}}</td><td>{{midterm}}</td><td>{{final}}</td>
		</tr>
	{{/each}}
	</table>
</script>

<script>
	window.onload = async function(){
		var url = "cit5students.json";
		var response = await fetch(url);
		if(response.ok){
			var data = await response.json();
			
			var templateText = document.getElementById('tableTemplate').innerHTML;
			var compiledTemplateText = Handlebars.compile(templateText);
			compiledHtml = compiledTemplateText({ rows: data})
			document.getElementById('majorTable').innerHTML = compiledHtml;
		}
		
		else {
			document.querySelector('#majorTable').innerHTML = "Date Not Found";
		}
	}
</script>
</html>